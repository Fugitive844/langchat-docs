<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>RAG API 基础 | LangChat Docs</title>
    <meta name="description" content="LangChat Project Document">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/assets/style.wFIoVwSX.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.DXigCcGD.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.CCmSGSXN.js">
    <link rel="modulepreload" href="/assets/chunks/framework.ByciF0Oj.js">
    <link rel="modulepreload" href="/assets/course_docs_15RAGAPI.md.BB9aU49g.lean.js">
    <link rel="shortcut icon" href="/favicon.png">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-ed470ed6><!--[--><!--]--><!--[--><span tabindex="-1" data-v-f444f753></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-f444f753>Skip to content</a><!--]--><!----><header class="VPNav" data-v-ed470ed6 data-v-f09ebc71><div class="VPNavBar" data-v-f09ebc71 data-v-1044928a><div class="wrapper" data-v-1044928a><div class="container" data-v-1044928a><div class="title" data-v-1044928a><div class="VPNavBarTitle has-sidebar" data-v-1044928a data-v-c494e956><a class="title" href="/" data-v-c494e956><!--[--><!--]--><!----><span data-v-c494e956>LangChat Docs</span><!--[--><!--]--></a></div></div><div class="content" data-v-1044928a><div class="content-body" data-v-1044928a><!--[--><!--]--><div class="VPNavBarSearch search" data-v-1044928a><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-1044928a data-v-51f1f89a><span id="main-nav-aria-label" class="visually-hidden" data-v-51f1f89a> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-51f1f89a data-v-2ebde2b3><!--[--><span data-v-2ebde2b3>LangChat</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/langchat/docs/introduce.html" tabindex="0" data-v-51f1f89a data-v-2ebde2b3><!--[--><span data-v-2ebde2b3>LangChat文档</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/course/docs/00Introduce.html" tabindex="0" data-v-51f1f89a data-v-2ebde2b3><!--[--><span data-v-2ebde2b3>Java AI课程</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-51f1f89a data-v-e2cb7df8><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e2cb7df8><span class="text" data-v-e2cb7df8><!----><span data-v-e2cb7df8>在线预览</span><span class="vpi-chevron-down text-icon" data-v-e2cb7df8></span></span></button><div class="menu" data-v-e2cb7df8><div class="VPMenu" data-v-e2cb7df8 data-v-7750fdeb><div class="items" data-v-7750fdeb><!--[--><!--[--><div class="VPMenuLink" data-v-7750fdeb data-v-9a9070ef><a class="VPLink link vp-external-link-icon" href="http://llm.langchat.cn" target="_blank" rel="noreferrer" data-v-9a9070ef><!--[--><span data-v-9a9070ef>LangChat LLM Ops</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7750fdeb data-v-9a9070ef><a class="VPLink link vp-external-link-icon" href="http://upms.langchat.cn" target="_blank" rel="noreferrer" data-v-9a9070ef><!--[--><span data-v-9a9070ef>LangChat UPMS Ops</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-1044928a data-v-adf2275d><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-adf2275d data-v-4cc58f0d data-v-f45163c9><span class="check" data-v-f45163c9><span class="icon" data-v-f45163c9><!--[--><span class="vpi-sun sun" data-v-4cc58f0d></span><span class="vpi-moon moon" data-v-4cc58f0d></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-1044928a data-v-17ef9bfb data-v-34ec2aad><!--[--><a class="VPSocialLink no-icon" href="https://github.com/TyCoding/langchat" aria-label="github" target="_blank" rel="noopener" data-v-34ec2aad data-v-6953ab1f><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-1044928a data-v-a84198a3 data-v-e2cb7df8><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-e2cb7df8><span class="vpi-more-horizontal icon" data-v-e2cb7df8></span></button><div class="menu" data-v-e2cb7df8><div class="VPMenu" data-v-e2cb7df8 data-v-7750fdeb><!----><!--[--><!--[--><!----><div class="group" data-v-a84198a3><div class="item appearance" data-v-a84198a3><p class="label" data-v-a84198a3>Appearance</p><div class="appearance-action" data-v-a84198a3><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-a84198a3 data-v-4cc58f0d data-v-f45163c9><span class="check" data-v-f45163c9><span class="icon" data-v-f45163c9><!--[--><span class="vpi-sun sun" data-v-4cc58f0d></span><span class="vpi-moon moon" data-v-4cc58f0d></span><!--]--></span></span></button></div></div></div><div class="group" data-v-a84198a3><div class="item social-links" data-v-a84198a3><div class="VPSocialLinks social-links-list" data-v-a84198a3 data-v-34ec2aad><!--[--><a class="VPSocialLink no-icon" href="https://github.com/TyCoding/langchat" aria-label="github" target="_blank" rel="noopener" data-v-34ec2aad data-v-6953ab1f><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-1044928a data-v-5598f36f><span class="container" data-v-5598f36f><span class="top" data-v-5598f36f></span><span class="middle" data-v-5598f36f></span><span class="bottom" data-v-5598f36f></span></span></button></div></div></div></div><div class="divider" data-v-1044928a><div class="divider-line" data-v-1044928a></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-ed470ed6 data-v-d1ebcfd2><div class="container" data-v-d1ebcfd2><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-d1ebcfd2><span class="vpi-align-left menu-icon" data-v-d1ebcfd2></span><span class="menu-text" data-v-d1ebcfd2>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-d1ebcfd2 data-v-8683af8e><button data-v-8683af8e>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-ed470ed6 data-v-b5cecb30><div class="curtain" data-v-b5cecb30></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-b5cecb30><span class="visually-hidden" id="sidebar-aria-label" data-v-b5cecb30> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-d47b2d47><section class="VPSidebarItem level-0" data-v-d47b2d47 data-v-f455531b><div class="item" role="button" tabindex="0" data-v-f455531b><div class="indicator" data-v-f455531b></div><h2 class="text" data-v-f455531b>LangChain4j基础</h2><!----></div><div class="items" data-v-f455531b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-f455531b data-v-f455531b><div class="item" data-v-f455531b><div class="indicator" data-v-f455531b></div><a class="VPLink link link" href="/course/docs/00Introduce.html" data-v-f455531b><!--[--><p class="text" data-v-f455531b>开始之前</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f455531b data-v-f455531b><div class="item" data-v-f455531b><div class="indicator" data-v-f455531b></div><a class="VPLink link link" href="/course/docs/01Models.html" data-v-f455531b><!--[--><p class="text" data-v-f455531b>模型选择</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f455531b data-v-f455531b><div class="item" data-v-f455531b><div class="indicator" data-v-f455531b></div><a class="VPLink link link" href="/course/docs/02LangChain4j.html" data-v-f455531b><!--[--><p class="text" data-v-f455531b>LangChain4j 介绍</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f455531b data-v-f455531b><div class="item" data-v-f455531b><div class="indicator" data-v-f455531b></div><a class="VPLink link link" href="/course/docs/03ChatAPI.html" data-v-f455531b><!--[--><p class="text" data-v-f455531b>Chat API 上手</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f455531b data-v-f455531b><div class="item" data-v-f455531b><div class="indicator" data-v-f455531b></div><a class="VPLink link link" href="/course/docs/04ChatSetting.html" data-v-f455531b><!--[--><p class="text" data-v-f455531b>API 进阶配置</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f455531b data-v-f455531b><div class="item" data-v-f455531b><div class="indicator" data-v-f455531b></div><a class="VPLink link link" href="/course/docs/05ChatStream.html" data-v-f455531b><!--[--><p class="text" data-v-f455531b>Chat 流式输出</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f455531b data-v-f455531b><div class="item" data-v-f455531b><div class="indicator" data-v-f455531b></div><a class="VPLink link link" href="/course/docs/06ChatVL.html" data-v-f455531b><!--[--><p class="text" data-v-f455531b>Chat 视觉理解</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f455531b data-v-f455531b><div class="item" data-v-f455531b><div class="indicator" data-v-f455531b></div><a class="VPLink link link" href="/course/docs/07ChatMemory.html" data-v-f455531b><!--[--><p class="text" data-v-f455531b>Chat 记忆缓存</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f455531b data-v-f455531b><div class="item" data-v-f455531b><div class="indicator" data-v-f455531b></div><a class="VPLink link link" href="/course/docs/08Prompt.html" data-v-f455531b><!--[--><p class="text" data-v-f455531b>提示词工程</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f455531b data-v-f455531b><div class="item" data-v-f455531b><div class="indicator" data-v-f455531b></div><a class="VPLink link link" href="/course/docs/09JSONOutput.html" data-v-f455531b><!--[--><p class="text" data-v-f455531b>JSON 结构化输出</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f455531b data-v-f455531b><div class="item" data-v-f455531b><div class="indicator" data-v-f455531b></div><a class="VPLink link link" href="/course/docs/10DynamicJSON.html" data-v-f455531b><!--[--><p class="text" data-v-f455531b>业务动态 JSON 结构化</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f455531b data-v-f455531b><div class="item" data-v-f455531b><div class="indicator" data-v-f455531b></div><a class="VPLink link link" href="/course/docs/12Embedding.html" data-v-f455531b><!--[--><p class="text" data-v-f455531b>向量化及存储</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f455531b data-v-f455531b><div class="item" data-v-f455531b><div class="indicator" data-v-f455531b></div><a class="VPLink link link" href="/course/docs/13EmbeddingText.html" data-v-f455531b><!--[--><p class="text" data-v-f455531b>文本向量化分类</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f455531b data-v-f455531b><div class="item" data-v-f455531b><div class="indicator" data-v-f455531b></div><a class="VPLink link link" href="/course/docs/14DynamicFunctionCall.html" data-v-f455531b><!--[--><p class="text" data-v-f455531b>动态函数调用</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-d47b2d47><section class="VPSidebarItem level-0 has-active" data-v-d47b2d47 data-v-f455531b><div class="item" role="button" tabindex="0" data-v-f455531b><div class="indicator" data-v-f455531b></div><h2 class="text" data-v-f455531b>RAG</h2><!----></div><div class="items" data-v-f455531b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-f455531b data-v-f455531b><div class="item" data-v-f455531b><div class="indicator" data-v-f455531b></div><a class="VPLink link link" href="/course/docs/15RAGAPI.html" data-v-f455531b><!--[--><p class="text" data-v-f455531b>RAG API 基础</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f455531b data-v-f455531b><div class="item" data-v-f455531b><div class="indicator" data-v-f455531b></div><a class="VPLink link link" href="/course/docs/15RAGAPI2.html" data-v-f455531b><!--[--><p class="text" data-v-f455531b>RAG API 增强</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f455531b data-v-f455531b><div class="item" data-v-f455531b><div class="indicator" data-v-f455531b></div><a class="VPLink link link" href="/course/docs/16EasyRag.html" data-v-f455531b><!--[--><p class="text" data-v-f455531b>RAG Easy 快速上手</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f455531b data-v-f455531b><div class="item" data-v-f455531b><div class="indicator" data-v-f455531b></div><a class="VPLink link link" href="/course/docs/17RAGRank.html" data-v-f455531b><!--[--><p class="text" data-v-f455531b>RAG 结果重排</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f455531b data-v-f455531b><div class="item" data-v-f455531b><div class="indicator" data-v-f455531b></div><a class="VPLink link link" href="/course/docs/18WebSearch.html" data-v-f455531b><!--[--><p class="text" data-v-f455531b>函数增强搜索</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f455531b data-v-f455531b><div class="item" data-v-f455531b><div class="indicator" data-v-f455531b></div><a class="VPLink link link" href="/course/docs/19SensitiveWord.html" data-v-f455531b><!--[--><p class="text" data-v-f455531b>模型敏感词处理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f455531b data-v-f455531b><div class="item" data-v-f455531b><div class="indicator" data-v-f455531b></div><a class="VPLink link link" href="/course/docs/20Rag.html" data-v-f455531b><!--[--><p class="text" data-v-f455531b>RAG 进阶分享</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-ed470ed6 data-v-ee4370c0><div class="VPDoc has-sidebar has-aside" data-v-ee4370c0 data-v-479a6568><!--[--><!--]--><div class="container" data-v-479a6568><div class="aside" data-v-479a6568><div class="aside-curtain" data-v-479a6568></div><div class="aside-container" data-v-479a6568><div class="aside-content" data-v-479a6568><div class="VPDocAside" data-v-479a6568 data-v-312359a6><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-312359a6 data-v-f9862b92><div class="content" data-v-f9862b92><div class="outline-marker" data-v-f9862b92></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f9862b92>On this page</div><ul class="VPDocOutlineItem root" data-v-f9862b92 data-v-316b2cab><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-312359a6></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-479a6568><div class="content-container" data-v-479a6568><!--[--><!--]--><main class="main" data-v-479a6568><div style="position:relative;" class="vp-doc _course_docs_15RAGAPI" data-v-479a6568><div><p>LangChain4j 是一个强大的 Java 库,提供了丰富的 API 来简化构建自定义 RAG(检索增强生成)管道的过程。本指南将详细介绍 LangChain4j 的主要组件和 API,从简单到复杂的多种管道实现。</p><img src="https://minio.pigx.top/oss/202410/1728455030.png" alt="1728455030"><h2 id="_2-核心概念" tabindex="-1">2. 核心概念 <a class="header-anchor" href="#_2-核心概念" aria-label="Permalink to &quot;2. 核心概念&quot;">​</a></h2><h3 id="_2-1-document-文档" tabindex="-1">2.1 Document (文档) <a class="header-anchor" href="#_2-1-document-文档" aria-label="Permalink to &quot;2.1 Document (文档)&quot;">​</a></h3><p><code>Document</code> 类表示一个完整的文档,例如单个 PDF 文件或网页。</p><h4 id="主要方法" tabindex="-1">主要方法: <a class="header-anchor" href="#主要方法" aria-label="Permalink to &quot;主要方法:&quot;">​</a></h4><ul><li><code>Document.text()</code>: 返回文档的文本内容</li><li><code>Document.metadata()</code>: 返回文档的元数据</li><li><code>Document.toTextSegment()</code>: 将 <code>Document</code> 转换为 <code>TextSegment</code></li><li><code>Document.from(String, Metadata)</code>: 从文本和元数据创建 <code>Document</code></li><li><code>Document.from(String)</code>: 从文本创建不带元数据的 <code>Document</code></li></ul><h3 id="_2-2-metadata-元数据" tabindex="-1">2.2 Metadata (元数据) <a class="header-anchor" href="#_2-2-metadata-元数据" aria-label="Permalink to &quot;2.2 Metadata (元数据)&quot;">​</a></h3><p><code>Metadata</code> 存储文档的额外信息,如名称、来源、最后更新时间等。</p><h4 id="主要方法-1" tabindex="-1">主要方法: <a class="header-anchor" href="#主要方法-1" aria-label="Permalink to &quot;主要方法:&quot;">​</a></h4><ul><li><code>Metadata.from(Map)</code>: 从 <code>Map</code> 创建 <code>Metadata</code></li><li><code>Metadata.put(String key, String value)</code>: 添加元数据条目</li><li><code>Metadata.getString(String key)</code> / <code>getInteger(String key)</code>: 获取指定类型的元数据值</li><li><code>Metadata.containsKey(String key)</code>: 检查是否包含指定键</li><li><code>Metadata.remove(String key)</code>: 移除指定键的元数据条目</li><li><code>Metadata.copy()</code>: 复制元数据</li><li><code>Metadata.toMap()</code>: 将元数据转换为 <code>Map</code></li></ul><h3 id="_2-3-textsegment-文本片段" tabindex="-1">2.3 TextSegment (文本片段) <a class="header-anchor" href="#_2-3-textsegment-文本片段" aria-label="Permalink to &quot;2.3 TextSegment (文本片段)&quot;">​</a></h3><p><code>TextSegment</code> 表示文档的一个片段,专用于文本信息。</p><h4 id="主要方法-2" tabindex="-1">主要方法: <a class="header-anchor" href="#主要方法-2" aria-label="Permalink to &quot;主要方法:&quot;">​</a></h4><ul><li><code>TextSegment.text()</code>: 返回文本片段的内容</li><li><code>TextSegment.metadata()</code>: 返回文本片段的元数据</li><li><code>TextSegment.from(String, Metadata)</code>: 从文本和元数据创建 <code>TextSegment</code></li><li><code>TextSegment.from(String)</code>: 从文本创建不带元数据的 <code>TextSegment</code></li></ul><h3 id="_2-4-embedding-嵌入" tabindex="-1">2.4 Embedding (嵌入) <a class="header-anchor" href="#_2-4-embedding-嵌入" aria-label="Permalink to &quot;2.4 Embedding (嵌入)&quot;">​</a></h3><p><code>Embedding</code> 类封装了一个数值向量,表示嵌入内容的语义含义。</p><h4 id="主要方法-3" tabindex="-1">主要方法: <a class="header-anchor" href="#主要方法-3" aria-label="Permalink to &quot;主要方法:&quot;">​</a></h4><ul><li><code>Embedding.dimension()</code>: 返回嵌入向量的维度</li><li><code>CosineSimilarity.between(Embedding, Embedding)</code>: 计算两个嵌入向量的余弦相似度</li><li><code>Embedding.normalize()</code>: 对嵌入向量进行归一化</li></ul><h2 id="_3-文档处理" tabindex="-1">3. 文档处理 <a class="header-anchor" href="#_3-文档处理" aria-label="Permalink to &quot;3. 文档处理&quot;">​</a></h2><h3 id="_3-1-document-loader-文档加载器" tabindex="-1">3.1 Document Loader (文档加载器) <a class="header-anchor" href="#_3-1-document-loader-文档加载器" aria-label="Permalink to &quot;3.1 Document Loader (文档加载器)&quot;">​</a></h3><p>LangChain4j 提供了多种文档加载器:</p><ul><li><code>FileSystemDocumentLoader</code>: 从文件系统加载文档</li><li><code>UrlDocumentLoader</code>: 从 URL 加载文档</li><li><code>AmazonS3DocumentLoader</code>: 从 Amazon S3 加载文档</li><li><code>AzureBlobStorageDocumentLoader</code>: 从 Azure Blob 存储加载文档</li><li><code>GitHubDocumentLoader</code>: 从 GitHub 仓库加载文档</li><li><code>TencentCosDocumentLoader</code>: 从腾讯云 COS 加载文档</li></ul><h3 id="_3-2-document-parser-文档解析器" tabindex="-1">3.2 Document Parser (文档解析器) <a class="header-anchor" href="#_3-2-document-parser-文档解析器" aria-label="Permalink to &quot;3.2 Document Parser (文档解析器)&quot;">​</a></h3><p>用于解析不同格式的文档:</p><ul><li><code>TextDocumentParser</code>: 解析纯文本文件</li><li><code>ApachePdfBoxDocumentParser</code>: 解析 PDF 文件</li><li><code>ApachePoiDocumentParser</code>: 解析 MS Office 文件格式</li><li><code>ApacheTikaDocumentParser</code>: 自动检测并解析几乎所有文件格式</li></ul><p>示例:</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 加载单个文档</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Document document </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FileSystemDocumentLoader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loadDocument</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/path/to/file.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TextDocumentParser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 加载目录下的所有文档</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Document</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; documents </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FileSystemDocumentLoader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loadDocuments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/path/to/directory&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TextDocumentParser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span></code></pre></div><h3 id="_3-3-document-transformer-文档转换器" tabindex="-1">3.3 Document Transformer (文档转换器) <a class="header-anchor" href="#_3-3-document-transformer-文档转换器" aria-label="Permalink to &quot;3.3 Document Transformer (文档转换器)&quot;">​</a></h3><p><code>DocumentTransformer</code> 用于对文档执行各种转换,如清理、过滤、增强或总结。</p><p>目前提供的转换器:</p><ul><li><code>HtmlToTextDocumentTransformer</code>: 从 HTML 中提取文本内容和元数据</li></ul><h3 id="_3-4-document-splitter-文档拆分器" tabindex="-1">3.4 Document Splitter (文档拆分器) <a class="header-anchor" href="#_3-4-document-splitter-文档拆分器" aria-label="Permalink to &quot;3.4 Document Splitter (文档拆分器)&quot;">​</a></h3><p>用于将文档拆分成更小的片段:</p><ul><li><code>DocumentByParagraphSplitter</code>: 按段落拆分</li><li><code>DocumentBySentenceSplitter</code>: 按句子拆分</li><li><code>DocumentByWordSplitter</code>: 按单词拆分</li><li><code>DocumentByCharacterSplitter</code>: 按字符拆分</li><li><code>DocumentByRegexSplitter</code>: 按正则表达式拆分</li></ul><p>使用步骤:</p><ol><li>实例化 <code>DocumentSplitter</code> 并指定 <code>TextSegment</code> 的大小和重叠字符数</li><li>调用 <code>split(Document)</code> 或 <code>splitAll(List&lt;Document&gt;)</code> 方法</li><li><code>DocumentSplitter</code> 将文档拆分成小片段,并组合为 <code>TextSegment</code></li></ol><h2 id="_4-嵌入处理" tabindex="-1">4. 嵌入处理 <a class="header-anchor" href="#_4-嵌入处理" aria-label="Permalink to &quot;4. 嵌入处理&quot;">​</a></h2><h3 id="_4-1-embedding-model-嵌入模型" tabindex="-1">4.1 Embedding Model (嵌入模型) <a class="header-anchor" href="#_4-1-embedding-model-嵌入模型" aria-label="Permalink to &quot;4.1 Embedding Model (嵌入模型)&quot;">​</a></h3><p><code>EmbeddingModel</code> 接口表示一种将文本转换为 <code>Embedding</code> 的模型。</p><h4 id="主要方法-4" tabindex="-1">主要方法: <a class="header-anchor" href="#主要方法-4" aria-label="Permalink to &quot;主要方法:&quot;">​</a></h4><ul><li><code>EmbeddingModel.embed(String)</code>: 嵌入指定文本</li><li><code>EmbeddingModel.embed(TextSegment)</code>: 嵌入指定 <code>TextSegment</code></li><li><code>EmbeddingModel.embedAll(List&lt;TextSegment&gt;)</code>: 嵌入多个 <code>TextSegment</code></li><li><code>EmbeddingModel.dimension()</code>: 返回嵌入向量的维度</li></ul><h3 id="_4-2-embedding-store-嵌入存储" tabindex="-1">4.2 Embedding Store (嵌入存储) <a class="header-anchor" href="#_4-2-embedding-store-嵌入存储" aria-label="Permalink to &quot;4.2 Embedding Store (嵌入存储)&quot;">​</a></h3><p><code>EmbeddingStore</code> 接口表示一个嵌入存储库(向量数据库),用于存储和高效搜索相似的嵌入。</p><h4 id="主要方法-5" tabindex="-1">主要方法: <a class="header-anchor" href="#主要方法-5" aria-label="Permalink to &quot;主要方法:&quot;">​</a></h4><ul><li><code>EmbeddingStore.add(Embedding)</code>: 添加嵌入并返回随机 ID</li><li><code>EmbeddingStore.addAll(List&lt;Embedding&gt;)</code>: 添加多个嵌入并返回随机 ID 列表</li><li><code>EmbeddingStore.search(EmbeddingSearchRequest)</code>: 搜索最相似的嵌入</li><li><code>EmbeddingStore.remove(String id)</code>: 删除指定 ID 的嵌入</li></ul><h3 id="_4-3-embedding-store-ingestor-嵌入存储摄取器" tabindex="-1">4.3 Embedding Store Ingestor (嵌入存储摄取器) <a class="header-anchor" href="#_4-3-embedding-store-ingestor-嵌入存储摄取器" aria-label="Permalink to &quot;4.3 Embedding Store Ingestor (嵌入存储摄取器)&quot;">​</a></h3><p><code>EmbeddingStoreIngestor</code> 负责将文档嵌入并存储到 <code>EmbeddingStore</code> 中。</p><p>示例:</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EmbeddingStoreIngestor ingestor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EmbeddingStoreIngestor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">builder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">embeddingModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(embeddingModel)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">embeddingStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(embeddingStore)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ingestor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ingest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(document1);</span></span></code></pre></div><p>可以通过指定 <code>DocumentTransformer</code> 和 <code>DocumentSplitter</code>,在嵌入前对文档进行转换和拆分。</p><h2 id="_5-构建-rag-管道" tabindex="-1">5. 构建 RAG 管道 <a class="header-anchor" href="#_5-构建-rag-管道" aria-label="Permalink to &quot;5. 构建 RAG 管道&quot;">​</a></h2><p>使用 LangChain4j 构建 RAG 管道的一般步骤:</p><ol><li>加载文档: 使用适当的 <code>DocumentLoader</code> 和 <code>DocumentParser</code> 加载文档</li><li>转换文档: 使用 <code>DocumentTransformer</code> 清理或增强文档(可选)</li><li>拆分文档: 使用 <code>DocumentSplitter</code> 将文档拆分为更小的片段</li><li>嵌入文档: 使用 <code>EmbeddingModel</code> 将文档片段转换为嵌入向量</li><li>存储嵌入: 使用 <code>EmbeddingStore</code> 存储嵌入向量</li><li>检索相关内容: 根据用户查询,从 <code>EmbeddingStore</code> 检索最相关的文档片段</li><li>生成响应: 将检索到的相关内容与用户查询一起提供给语言模型,生成最终响应</li></ol><h2 id="_6-最佳实践" tabindex="-1">6. 最佳实践 <a class="header-anchor" href="#_6-最佳实践" aria-label="Permalink to &quot;6. 最佳实践&quot;">​</a></h2><ul><li>根据具体需求选择合适的文档拆分策略</li><li>使用自定义的 <code>DocumentTransformer</code> 来清理和增强文档</li><li>选择合适的嵌入模型和嵌入存储以平衡性能和准确性</li><li>定期更新和维护嵌入存储,以确保信息的时效性</li><li>对检索结果进行后处理,如重新排序或过滤,以提高相关性</li></ul><h2 id="_7-结语" tabindex="-1">7. 结语 <a class="header-anchor" href="#_7-结语" aria-label="Permalink to &quot;7. 结语&quot;">​</a></h2><p>LangChain4j 提供了构建高效 RAG 系统所需的全套工具。通过灵活组合这些组件,您可以创建适合特定用例的自定义 RAG 管道。随着项目的发展,不断优化和调整各个组件,以提高系统的整体性能和准确性。</p></div></div></main><footer class="VPDocFooter" data-v-479a6568 data-v-a9f44413><!--[--><!--]--><div class="edit-info" data-v-a9f44413><!----><div class="last-updated" data-v-a9f44413><p class="VPLastUpdated" data-v-a9f44413 data-v-0500d987>Last updated: <time datetime="2025-02-04T02:50:54.000Z" data-v-0500d987></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-a9f44413><span class="visually-hidden" id="doc-footer-aria-label" data-v-a9f44413>Pager</span><div class="pager" data-v-a9f44413><a class="VPLink link pager-link prev" href="/course/docs/14DynamicFunctionCall.html" data-v-a9f44413><!--[--><span class="desc" data-v-a9f44413>Previous page</span><span class="title" data-v-a9f44413>动态函数调用</span><!--]--></a></div><div class="pager" data-v-a9f44413><a class="VPLink link pager-link next" href="/course/docs/15RAGAPI2.html" data-v-a9f44413><!--[--><span class="desc" data-v-a9f44413>Next page</span><span class="title" data-v-a9f44413>RAG API 增强</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"course_docs_00introduce.md\":\"BPb6ZQc5\",\"course_docs_01models.md\":\"CnZDumaZ\",\"course_docs_02langchain4j.md\":\"BqBm7T7Z\",\"course_docs_03chatapi.md\":\"DuvQpB9r\",\"course_docs_04chatsetting.md\":\"Bua8-QFe\",\"course_docs_05chatstream.md\":\"DfJx_VnK\",\"course_docs_06chatvl.md\":\"xJ6_4RDZ\",\"course_docs_07chatmemory.md\":\"DaapT6rW\",\"course_docs_08prompt.md\":\"BWYJ9LSG\",\"course_docs_09jsonoutput.md\":\"Dw2ZprI_\",\"course_docs_10dynamicjson.md\":\"mdHGuCot\",\"course_docs_11functioncall.md\":\"yaQz7bnt\",\"course_docs_12embedding.md\":\"CxnmfyCR\",\"course_docs_13embeddingtext.md\":\"Dpe1mCeO\",\"course_docs_14dynamicfunctioncall.md\":\"CO9_2-c1\",\"course_docs_15ragapi.md\":\"BB9aU49g\",\"course_docs_15ragapi2.md\":\"B9pCRD4I\",\"course_docs_16easyrag.md\":\"z7wbRbsw\",\"course_docs_17ragrank.md\":\"LSxfsfkU\",\"course_docs_18websearch.md\":\"BVOQ1vm3\",\"course_docs_19sensitiveword.md\":\"6SUyGZI6\",\"course_docs_20rag.md\":\"CFLP7nQ4\",\"index.md\":\"svPhz-ri\",\"langchat_docs_introduce.md\":\"CXPF4FN9\",\"langchat_docs_questions.md\":\"CsJ_8bzt\",\"langchat_docs_rag.md\":\"BqSY2rti\",\"langchat_docs_run_environment.md\":\"BOJGlr_S\",\"langchat_docs_run_getting-started.md\":\"CJtFsGAb\",\"langchat_docs_run_login.md\":\"IsvveOf8\",\"langchat_docs_server_knowledge.md\":\"B1g4Kg17\",\"langchat_docs_server_models-proxy.md\":\"3QDtmYNA\",\"langchat_docs_server_models.md\":\"BkmsssDO\",\"langchat_docs_show.md\":\"C0pV5WLq\",\"readme.md\":\"DIfEU95K\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"LangChat Docs\",\"description\":\"LangChat Project Document\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"search\":{\"provider\":\"local\"},\"nav\":[{\"text\":\"LangChat\",\"link\":\"/\"},{\"text\":\"LangChat文档\",\"link\":\"/langchat/docs/introduce\",\"activeMatch\":\"/langchat/\"},{\"text\":\"Java AI课程\",\"link\":\"/course/docs/00Introduce\",\"activeMatch\":\"/course/\"},{\"text\":\"在线预览\",\"items\":[{\"text\":\"LangChat LLM Ops\",\"link\":\"http://llm.langchat.cn\"},{\"text\":\"LangChat UPMS Ops\",\"link\":\"http://upms.langchat.cn\"}]}],\"sidebar\":{\"/langchat/\":[{\"text\":\"写在前面\",\"items\":[{\"text\":\"LangChat介绍\",\"link\":\"/langchat/docs/introduce\"},{\"text\":\"RAG基础概念\",\"link\":\"/langchat/docs/rag\"},{\"text\":\"常见问题\",\"link\":\"/langchat/docs/questions\"},{\"text\":\"更多文档\",\"link\":\"/langchat/docs/show\"}]},{\"text\":\"运行LangChat\",\"items\":[{\"text\":\"环境准备\",\"link\":\"/langchat/docs/run/environment\"},{\"text\":\"快速开始\",\"link\":\"/langchat/docs/run/getting-started\"},{\"text\":\"登录\",\"link\":\"/langchat/docs/run/login\"}]},{\"text\":\"LangChat使用\",\"items\":[{\"text\":\"模型配置\",\"link\":\"/langchat/docs/server/models\"},{\"text\":\"模型代理\",\"link\":\"/langchat/docs/server/models-proxy\"},{\"text\":\"知识库\",\"link\":\"/langchat/docs/server/knowledge\"}]}],\"/course\":[{\"text\":\"LangChain4j基础\",\"items\":[{\"text\":\"开始之前\",\"link\":\"/course/docs/00Introduce\"},{\"text\":\"模型选择\",\"link\":\"/course/docs/01Models\"},{\"text\":\"LangChain4j 介绍\",\"link\":\"/course/docs/02LangChain4j\"},{\"text\":\"Chat API 上手\",\"link\":\"/course/docs/03ChatAPI\"},{\"text\":\"API 进阶配置\",\"link\":\"/course/docs/04ChatSetting\"},{\"text\":\"Chat 流式输出\",\"link\":\"/course/docs/05ChatStream\"},{\"text\":\"Chat 视觉理解\",\"link\":\"/course/docs/06ChatVL\"},{\"text\":\"Chat 记忆缓存\",\"link\":\"/course/docs/07ChatMemory\"},{\"text\":\"提示词工程\",\"link\":\"/course/docs/08Prompt\"},{\"text\":\"JSON 结构化输出\",\"link\":\"/course/docs/09JSONOutput\"},{\"text\":\"业务动态 JSON 结构化\",\"link\":\"/course/docs/10DynamicJSON\"},{\"text\":\"向量化及存储\",\"link\":\"/course/docs/12Embedding\"},{\"text\":\"文本向量化分类\",\"link\":\"/course/docs/13EmbeddingText\"},{\"text\":\"动态函数调用\",\"link\":\"/course/docs/14DynamicFunctionCall\"}]},{\"text\":\"RAG\",\"items\":[{\"text\":\"RAG API 基础\",\"link\":\"/course/docs/15RAGAPI\"},{\"text\":\"RAG API 增强\",\"link\":\"/course/docs/15RAGAPI2\"},{\"text\":\"RAG Easy 快速上手\",\"link\":\"/course/docs/16EasyRag\"},{\"text\":\"RAG 结果重排\",\"link\":\"/course/docs/17RAGRank\"},{\"text\":\"函数增强搜索\",\"link\":\"/course/docs/18WebSearch\"},{\"text\":\"模型敏感词处理\",\"link\":\"/course/docs/19SensitiveWord\"},{\"text\":\"RAG 进阶分享\",\"link\":\"/course/docs/20Rag\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/TyCoding/langchat\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>